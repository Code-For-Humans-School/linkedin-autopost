extends layout

block content
  .container-fluid
    .container.custom-container
      .text-center
        h1= title
        p Welcome to #{title}

        if error == 'logoutError'
          .alert.alert-danger(role='alert') There was an error logging you out. Please try again.
        if githubRepoError
          .alert.alert-danger(role='alert') #{githubRepoError}
        if userInfo && userInfo.length > 0
          p Welcome our GitHub guest: #{userInfo[0].github_username}
          //- Logout Button
          a.btn.btn-danger(href='/users/logout', style="margin-bottom: 20px;") Log Out

      //- Display GitHub Repositories
      if githubRepos && githubRepos.length > 0
        .row.no-gutters
          each repo in githubRepos
            .col-lg-4.col-md-6.col-sm-12.mb-4.custom-col
              .card.card-hover
                .card-body
                  h5.card-title
                    span(style="color: #207fe0; font-weight: bold; margin-right: 5px;")= repo.name
                    if repo.hasSetWebhook
                      i.bi.bi-check2-all(style="font-weight: bolder; font-size: 24px; color: green;")
                  p.card-text(style="color: #636c76;")= repo.description
                  .d-flex.align-items-center.flex-wrap
                    if repo.private
                      .badge.custom-badge(style="color: #636c76; font-weight: bold; border: 1px solid #d0d7de; border-radius: 10px;") Private
                    else
                      .badge.custom-badge(style="color: #636c76; font-weight: bold; border: 1px solid #d0d7de; border-radius: 10px;") Public
                    if repo.language
                      .badge.custom-badge(style="color: #776c76; display: flex; align-items: center; justify-content: center;")
                        span.circle(style="background-color: #f1df62; width: 12px; height: 12px; border-radius: 50%; display: inline-block; margin-right: 5px;")
                        | #{repo.language}
                    if repo.stars > 0
                      .badge.custom-badge(style="color: #776c76; font-weight: bold; display: flex; align-items: center; justify-content: center;")
                        i.fas.fa-star(style="margin-right: 5px;")
                        | #{repo.stars}
                    if repo.forks > 0
                      .badge.custom-badge(style="color: #776c76; font-weight: bold; display: flex; align-items: center; justify-content: center")
                        i.fas.fa-code-branch(style="margin-right: 5px;")
                        | #{repo.forks}
      else
        .alert.alert-info(role='alert') No repositories found.

      //- Pagination Component
      .pagination-container
        .d-flex.justify-content-between.align-items-center
          .form-group
            label(for="perPageSelect") Repositories per page:
            select.form-control#perPageSelect(name="per_page", onchange="location = this.value;")
              option(value=`/?page=1&per_page=15` selected=perPage==15) 15
              option(value=`/?page=1&per_page=30` selected=perPage==30) 30
              option(value=`/?page=1&per_page=50` selected=perPage==50) 50
          .pagination
            if currentPage > 1
              li.page-item
                a.page-link(href=`/?page=${currentPage-1}&per_page=${perPage}`) Previous
            if githubRepos.length == perPage
              li.page-item
                a.page-link(href=`/?page=${currentPage+1}&per_page=${perPage}`) Next

  //- Custom Styles
  style.
    .custom-badge:not(:first-child) {
      margin-left: 0px;
    }
    .card-hover {
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    .card-hover:hover {
      transform: scale(1.02);
    }
    .custom-col {
      padding-left: 10px;
      padding-right: 10px;
    }
    .custom-container {
      max-width: 1300px;
    }
    .container-fluid {
      padding-left: 30px;
      padding-right: 30px;
    }
    @media (max-width: 576px) {
      .container-fluid {
        padding-left: 10px;
        padding-right: 10px;
      }
    }
